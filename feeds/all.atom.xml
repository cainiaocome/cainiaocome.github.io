<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>jlz's blog</title><link href="/" rel="alternate"></link><link href="/feeds/all.atom.xml" rel="self"></link><id>/</id><updated>2022-01-23T07:57:15-04:30</updated><subtitle></subtitle><entry><title>How to specify output language for only one command in terminal</title><link href="/how-to-specify-output-language-for-only-one-command-in-terminal.html" rel="alternate"></link><published>2022-01-23T07:57:15-04:30</published><updated>2022-01-23T07:57:15-04:30</updated><author><name>jlz</name></author><id>tag:None,2022-01-23:/how-to-specify-output-language-for-only-one-command-in-terminal.html</id><summary type="html">&lt;p&gt;The language I set on my computers is Chinese since it's my native language.
Some commands will read the environment variables to determine the proper output language, for example, date.
But sometimes I want it not to output Chinese.
Searched a bit and found &lt;a href="https://stackoverflow.com/questions/12896509/forcing-date-to-use-a-locale-other-than-the-machine-default/12896738"&gt;this&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The solution is simple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;LC_ALL …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;The language I set on my computers is Chinese since it's my native language.
Some commands will read the environment variables to determine the proper output language, for example, date.
But sometimes I want it not to output Chinese.
Searched a bit and found &lt;a href="https://stackoverflow.com/questions/12896509/forcing-date-to-use-a-locale-other-than-the-machine-default/12896738"&gt;this&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The solution is simple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;LC_ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_CA.UTF-8 date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you want to find out all locales supported by your system:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;locale -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Linux"></category></entry><entry><title>Ubuntu cloud image dhcp problem in proxmox</title><link href="/ubuntu-cloud-image-dhcp-problem-in-proxmox.html" rel="alternate"></link><published>2022-01-23T07:57:15-04:30</published><updated>2022-01-23T07:57:15-04:30</updated><author><name>jlz</name></author><id>tag:None,2022-01-23:/ubuntu-cloud-image-dhcp-problem-in-proxmox.html</id><summary type="html">&lt;p&gt;When I create new qemu vm in proxmox, I prefer clone from a template becase this way is faster.
The template comes from vm which I have booted once and made some modification.
My pve is running on a n3350 mini pc, the performance is miserable when building a new …&lt;/p&gt;</summary><content type="html">&lt;p&gt;When I create new qemu vm in proxmox, I prefer clone from a template becase this way is faster.
The template comes from vm which I have booted once and made some modification.
My pve is running on a n3350 mini pc, the performance is miserable when building a new vm scratch from an disk image. 
But it can handle tens of running vms without problem, as long as the vm is not doing some heavy computing.&lt;/p&gt;
&lt;p&gt;The problem is, every time I clone a template, when booting the cloned vm, the first dhcp packet seems coming from cloud-init, and at that time, network stack has not start up so there is no mac address available for cloud-init to read.
So it seems cloud-init will read from a file, /etc/machine-id, as a mac address to send first dhcp request.
That poses a problem: the machine-id of every cloned vm is same.
The solution is: empty the file /etc/machine-id, it seems cloud-init will regenerate one if it is empty.
Different vms have different names, and we want to resolve vm's ip by its name.
The problem is: in proxmox, the snippets defined variables seems have higher priority than settings in the cloud-init section in the settings of vm and name of the vm(consider hostname).
The solution is: modify the snippets file instead of relying on the name of the vm to modify hostname.&lt;/p&gt;
&lt;p&gt;It took me a long way to finally got these two pieces of solution.
I have tried many other ways, but it seems this is the best for me now. &lt;/p&gt;</content><category term="proxmox"></category></entry><entry><title>Ubuntu cloud image NFS server problem</title><link href="/ubuntu-cloud-image-nfs-server-problem.html" rel="alternate"></link><published>2022-01-23T07:57:15-04:30</published><updated>2022-01-23T07:57:15-04:30</updated><author><name>jlz</name></author><id>tag:None,2022-01-23:/ubuntu-cloud-image-nfs-server-problem.html</id><summary type="html">&lt;p&gt;I am using Ubuntu cloud image, version 20.04, in proxmox.
But it seems the kernel in this image lack some kernel modules which are needed by the nfs-kernel-server package.
To solve it, you can compile the kernel by yourself, or insmod to check, or use &lt;a href="https://github.com/pimlie/ubuntu-mainline-kernel.sh"&gt;this script&lt;/a&gt; to download …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I am using Ubuntu cloud image, version 20.04, in proxmox.
But it seems the kernel in this image lack some kernel modules which are needed by the nfs-kernel-server package.
To solve it, you can compile the kernel by yourself, or insmod to check, or use &lt;a href="https://github.com/pimlie/ubuntu-mainline-kernel.sh"&gt;this script&lt;/a&gt; to download a more recent and more modules-included kernel.&lt;/p&gt;
&lt;p&gt;The Ubuntu cloud image contains about 10 kernel modules, and Ubuntu generic kernel image contains about 60 kernel modules.
I suppose they might want the cloud server to be minimum and not enabled that many modules but I have enough resources so I don't care that much.&lt;/p&gt;
&lt;p&gt;The error messages are like below:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A dependency job for nfs-server.service failed.&lt;/li&gt;
&lt;li&gt;nfs-mountd.service: Job nfs-mountd.service/start failed with result 'dependency'&lt;/li&gt;
&lt;li&gt;mount: /proc/fs/nfsd: unknown filesystem type 'nfsd'&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The kernel modules which are necessary for nfs server should be following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nfsd&lt;/li&gt;
&lt;li&gt;nfs_acl&lt;/li&gt;
&lt;li&gt;lockd&lt;/li&gt;
&lt;li&gt;grace&lt;/li&gt;
&lt;li&gt;sunrpc&lt;/li&gt;
&lt;/ul&gt;</content><category term="ubuntu"></category></entry><entry><title>bootstrap ansible on windows 10</title><link href="/bootstrap-ansible-on-windows-10.html" rel="alternate"></link><published>2021-10-13T06:12:34+00:00</published><updated>2021-10-13T06:12:34+00:00</updated><author><name>jlz</name></author><id>tag:None,2021-10-13:/bootstrap-ansible-on-windows-10.html</id><summary type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;to be updated, I don't have time recently, I am reading libp2p source code and documentation lately.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;set network connection profile, more at &lt;a href="https://docs.microsoft.com/en-us/powershell/module/netconnection/set-netconnectionprofile?view=windowsserver2019-ps"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;enable smb v2/v3 protocol, more at &lt;a href="https://docs.microsoft.com/en-us/windows-server/storage/file-server/troubleshoot/detect-enable-and-disable-smbv1-v2-v3"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;disable firewall, more at &lt;a href="https://www.faqforge.com/windows/turn-off-firewall-using-powershell-command-prompt/"&gt;here&lt;/a&gt;, or you can only allow 445 port income from certain hosts.
    &lt;code&gt;powershell
    Set-NetConnectionProfile …&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;to be updated, I don't have time recently, I am reading libp2p source code and documentation lately.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;set network connection profile, more at &lt;a href="https://docs.microsoft.com/en-us/powershell/module/netconnection/set-netconnectionprofile?view=windowsserver2019-ps"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;enable smb v2/v3 protocol, more at &lt;a href="https://docs.microsoft.com/en-us/windows-server/storage/file-server/troubleshoot/detect-enable-and-disable-smbv1-v2-v3"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;disable firewall, more at &lt;a href="https://www.faqforge.com/windows/turn-off-firewall-using-powershell-command-prompt/"&gt;here&lt;/a&gt;, or you can only allow 445 port income from certain hosts.
    &lt;code&gt;powershell
    Set-NetConnectionProfile -NetworkCategory "Private"
    Set-SmbServerConfiguration -EnableSMB2Protocol $true
    Set-NetFirewallProfile -Profile Private -Enabled False&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now you should be able to use ansible psexec module to execute command on this windows machine.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://docs.ansible.com/ansible/latest/collections/community/windows/psexec_module.html#ansible-collections-community-windows-psexec-module"&gt;The document of ansible module psexec&lt;/a&gt; says:
* Runs a remote command from a Linux host to a Windows host without WinRM being set up.
* Can be run on the Ansible controller to bootstrap Windows hosts to get them ready for WinRM.
So we can get this windows machine ready for WinRM using psexec module&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ansible module psexec requires:&lt;ol&gt;
&lt;li&gt;pypsexec&lt;/li&gt;
&lt;li&gt;smbprotocol[kerberos] for optional Kerberos authentication&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;psexec can be installed by pip, you don't need Kerberos authentication for now.
    &lt;code&gt;bash
    ansible-galaxy collection install community.windows
    pip install pypsexec&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;</content><category term="ansible"></category></entry><entry><title>SQL tips</title><link href="/sql-tips.html" rel="alternate"></link><published>2021-10-08T10:14:12+08:00</published><updated>2021-10-08T10:14:12+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-10-08:/sql-tips.html</id><summary type="html">&lt;p&gt;Last update: 2021-10-08&lt;/p&gt;
&lt;p&gt;Here are some tips that I hope somebody told me earlier:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;select from multiple tables implicitly means cross join, simple "join" also means cross join. The following two SQL queries both return cross join of Parts and Suppliers.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Parts&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt;
&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Parts&lt;/span&gt; &lt;span class="n"&gt;join&lt;/span&gt; &lt;span class="n"&gt;Suppliers …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Last update: 2021-10-08&lt;/p&gt;
&lt;p&gt;Here are some tips that I hope somebody told me earlier:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;select from multiple tables implicitly means cross join, simple "join" also means cross join. The following two SQL queries both return cross join of Parts and Suppliers.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Parts&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt;
&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Parts&lt;/span&gt; &lt;span class="n"&gt;join&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ol&gt;
&lt;li&gt;You can use the "with" clause to define temporary tables and use it in following SQL queries. This can simplify SQL queries and easier to understand.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;with&lt;/span&gt;
    &lt;span class="n"&gt;Cheap_Parts&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Parts&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Parts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cost&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;Expensive_Parts&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Parts&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Parts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cost&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Cheap_Parts&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ol&gt;
&lt;li&gt;SQL does have an evaluation order. Some people might have heard about SQL optimizers and think that the order is determined by the optimizer. But that is the execution process. SQL does have a logical evaluation order, or else how can we be sure that the result would be determined? I am not talking about non-deterministic functions in SQL here. In general, the evaluation order is listed below. You can read more about it at &lt;a href="https://docs.microsoft.com/en-us/sql/t-sql/queries/select-transact-sql?redirectedfrom=MSDN&amp;amp;view=sql-server-ver15"&gt;here&lt;/a&gt;, &lt;a href="https://sqlbolt.com/lesson/select_queries_order_of_execution"&gt;here&lt;/a&gt;, and &lt;a href="https://jvns.ca/blog/2019/10/03/sql-queries-don-t-start-with-select/"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;FROM&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ON&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;JOIN&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;WHERE&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;GROUP&lt;/span&gt; &lt;span class="n"&gt;BY&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;HAVING&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;DISTINCT&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ORDER&lt;/span&gt; &lt;span class="n"&gt;BY&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;TOP&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="SQL"></category></entry><entry><title>Block ads using DNS on OpenWRT</title><link href="/block-ads-using-dns-on-openwrt.html" rel="alternate"></link><published>2021-10-07T09:43:30+08:00</published><updated>2021-10-07T09:43:30+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-10-07:/block-ads-using-dns-on-openwrt.html</id><summary type="html">&lt;p&gt;Recently I switched to OpenWRT as my gateway to the Internet. It has been a great pleasure. Stock firmware of routers just sucks. With OpenWRT, I can ssh into it, install packages, a nice web interface, the configuration makes sense, super smooth and quick, ad blocking, VPN, so on and …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently I switched to OpenWRT as my gateway to the Internet. It has been a great pleasure. Stock firmware of routers just sucks. With OpenWRT, I can ssh into it, install packages, a nice web interface, the configuration makes sense, super smooth and quick, ad blocking, VPN, so on and on.&lt;/p&gt;
&lt;p&gt;I just added adblock to my router yesterday, here are the commands of the process:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Install packages&lt;/span&gt;
opkg update
opkg install adblock

&lt;span class="c1"&gt;# Provide web interface&lt;/span&gt;
opkg install luci-app-adblock

&lt;span class="c1"&gt;# Backup the blocklists&lt;/span&gt;
uci &lt;span class="nb"&gt;set&lt;/span&gt; adblock.global.adb_backupdir&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/adblock&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# Save and apply&lt;/span&gt;
uci commit adblock
/etc/init.d/adblock restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can read more about it &lt;a href="https://openwrt.org/docs/guide-user/services/ad-blocking"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The default configuration should cost about 6M RAM (with "DNS Report" turned on) and less than 1M disk space. In my situation this is fine, you should check your router's ram and disk before applying these commands.&lt;/p&gt;
&lt;p&gt;You can turn on "DNS Report" on the Luci web. I like to analyze the performance and result so I turned it on.&lt;/p&gt;
&lt;p&gt;However, using DNS to block ads is inefficient and prone to be bypassed. For example, the apps on your phone can use their DNS server, or use DNS-over-HTTPS, to bypass it. Not much can be done to DNS-over-HTTPS and doh is becoming more and more common. The ecosystem of mobile phones is pretty toxic. Personally, I prefer using browsers, even on my phone. Blocking ads on mobile browsers is another story.&lt;/p&gt;</content><category term="Linux"></category></entry><entry><title>How to install openwrt on redmi ac2100</title><link href="/how-to-install-openwrt-on-redmi-ac2100.html" rel="alternate"></link><published>2021-09-29T13:03:51+08:00</published><updated>2021-09-29T13:03:51+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-09-29:/how-to-install-openwrt-on-redmi-ac2100.html</id><summary type="html">&lt;p&gt;Redmi ac2100 is a pretty good router for home use, except that its rom is a "highly customized" openwrt which restrictions are too strict and I remember that several years ago xiaomi added some nasty "functionalities" into their router devices which can inject javascript int web pages users browse and …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Redmi ac2100 is a pretty good router for home use, except that its rom is a "highly customized" openwrt which restrictions are too strict and I remember that several years ago xiaomi added some nasty "functionalities" into their router devices which can inject javascript int web pages users browse and profit.&lt;/p&gt;
&lt;p&gt;Anyway, here are some useful links:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://openwrt.org/toh/hwdata/xiaomi/xiaomi_redmi_router_ac2100"&gt;tech data about readmi ac2100&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://forum.openwrt.org/t/new-xiaomi-router-ac2100"&gt;openwrt forum topic about ac2100&lt;/a&gt; There are many interesting posts in this page, you can see the process of people cracking a router, fascinating, I hope I have more time to read and try these things out.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://openwrt.org/toh/xiaomi/xiaomi_redmi_router_ac2100"&gt;official doc of installing openwrt on ac2100&lt;/a&gt; &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I used method A(web exploit) in previous link, it's pretty easy and interesting. Read &lt;a href="https://openwrt.org/toh/hwdata/xiaomi/xiaomi_redmi_router_ac2100"&gt;link 1&lt;/a&gt; and &lt;a href="https://openwrt.org/toh/xiaomi/xiaomi_redmi_router_ac2100"&gt;link 3&lt;/a&gt; carefully before you do anything. And optionally you can flash BREED as new bootloader, I did this step, it will allow you to recover more easily once you brick the device, you can also flash rom more easily with BREED.&lt;/p&gt;
&lt;p&gt;I will check method B later if I got time, which is even more interesting.&lt;/p&gt;
&lt;p&gt;some tips and informations you might want to know:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;MTD is a kind of storage device, it is different from both block device and character device. You can google more about it.&lt;/li&gt;
&lt;li&gt;mtd is a tool in openwrt to write to MTD device, remember, MTD is different from block device, you need specific tools to write raw data to it. Read more about mtd utility &lt;a href="https://openwrt.org/docs/techref/mtd"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;openwrt will not turn on wireless interfaces by default if ethernet lan exists, so you need to turn them on. Read more about how to turn wifi on &lt;a href="https://openwrt.org/docs/guide-quick-start/basic_wifi"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;You better set the country code in the wireless settings, or else you might break the law, even may be end up in jail? I'm not sure.&lt;/li&gt;
&lt;li&gt;If you configured 5GHz Wifi, don't panic if you don't see your ssid on your laptop or mobile phone, openwrt will take some time to figure out whether it can operate on some 5GHz channels or not. After reboot this might happen again so you need to wait at least 10 minutes before you panic about no 5G wifi present and worry that your ac2100 is broken. More information is in &lt;a href="https://openwrt.org/docs/guide-quick-start/basic_wifi"&gt;link 5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;It is a known problem that many ac2100 come with bad NAND flash, my ac2100's NAND flash contains one bad eraseblock located at 768. It's not a big problem, but too many bad eraseblocks is a problem, especially if the eraseblock is located at the front of the NAND. The bootloader cannot has any bad eraseblock since it does not have functionality to navigate around bad block, the kernel also cannot overlap with bad eraseblock. But if the bad eraseblock is located after kernel, don't worry much about it, the linux kernel will handle this for you. Read more about bad blocks on NAND flash &lt;a href="https://openwrt.org/docs/techref/flash#bad_blocks"&gt;here&lt;/a&gt;, by the way, the documentation of openwrt is valuable, take some time to read them if you have the time, it's interesting.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I think this blog post is already too long and my English is showing its weakness, next time.&lt;/p&gt;</content><category term="linux"></category></entry><entry><title>What to do when ssh hangs in terminal</title><link href="/what-to-do-when-ssh-hangs-in-terminal.html" rel="alternate"></link><published>2021-09-28T15:35:59+08:00</published><updated>2021-09-28T15:35:59+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-09-28:/what-to-do-when-ssh-hangs-in-terminal.html</id><summary type="html">&lt;p&gt;I use ssh a lot. And I met this situation nearly every day: after waking laptop from sleep, I found that I didn't exit ssh connection before I close laptop lid, the ssh connection now hangs there.&lt;/p&gt;
&lt;p&gt;I know this escape sequence(~.) before, but sometimes I found it not working …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I use ssh a lot. And I met this situation nearly every day: after waking laptop from sleep, I found that I didn't exit ssh connection before I close laptop lid, the ssh connection now hangs there.&lt;/p&gt;
&lt;p&gt;I know this escape sequence(~.) before, but sometimes I found it not working as expected. I happen to saw &lt;a href="https://apple.stackexchange.com/questions/35524/what-can-i-do-when-my-ssh-session-is-stuck"&gt;this&lt;/a&gt; today. From what the answer says, the escape character(~) has to be the first character of a line, so first hit "enter/return" key, then escape sequence(~.) should always work. I will test them later.&lt;/p&gt;</content><category term="linux"></category></entry><entry><title>How to install ansible on ubuntu 20.04 server</title><link href="/how-to-install-ansible-on-ubuntu-2004-server.html" rel="alternate"></link><published>2021-09-28T12:36:19+08:00</published><updated>2021-09-28T12:36:19+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-09-28:/how-to-install-ansible-on-ubuntu-2004-server.html</id><summary type="html">&lt;p&gt;I am assuming your geo location is in China. Just copy-and-paste the following code into a bash script and execute it. It should work without any problem on a fresh installed ubuntu 20.04 server.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

apt install python3-pip

pip config &lt;span class="nb"&gt;set&lt;/span&gt; global.index-url https://mirrors.aliyun …&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;I am assuming your geo location is in China. Just copy-and-paste the following code into a bash script and execute it. It should work without any problem on a fresh installed ubuntu 20.04 server.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

apt install python3-pip

pip config &lt;span class="nb"&gt;set&lt;/span&gt; global.index-url https://mirrors.aliyun.com/pypi/simple/

pip install ansible

&lt;span class="c1"&gt;# pip install paramiko # install paramiko only if your openssh version is too old&lt;/span&gt;


&lt;span class="c1"&gt;## 清华源&lt;/span&gt;
&lt;span class="c1"&gt;#pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple&lt;/span&gt;
&lt;span class="c1"&gt;## 阿里源&lt;/span&gt;
&lt;span class="c1"&gt;#pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/&lt;/span&gt;
&lt;span class="c1"&gt;## 腾讯源&lt;/span&gt;
&lt;span class="c1"&gt;#pip config set global.index-url http://mirrors.cloud.tencent.com/pypi/simple&lt;/span&gt;
&lt;span class="c1"&gt;## 豆瓣源&lt;/span&gt;
&lt;span class="c1"&gt;#pip config set global.index-url http://pypi.douban.com/simple/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The steps are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;install pip &lt;ul&gt;
&lt;li&gt;It seems ubuntu 20.04 has dropped support for python2, good&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;set pip mirror. &lt;ul&gt;
&lt;li&gt;There are several mirrors in China. Using these mirrors might break your security, use them at your own risk.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;install ansible and paramiko&lt;ul&gt;
&lt;li&gt;It seems ansible is pretty easy to install.&lt;/li&gt;
&lt;li&gt;ssh functionalities require paramiko if your openssh is too old&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</content><category term="linux"></category></entry><entry><title>How to get rid of "remote host key identification changed" for good</title><link href="/how-to-get-rid-of-remote-host-key-identification-changed-for-good.html" rel="alternate"></link><published>2021-09-27T16:45:37+08:00</published><updated>2021-09-27T16:45:37+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-09-27:/how-to-get-rid-of-remote-host-key-identification-changed-for-good.html</id><summary type="html">&lt;p&gt;First of all, this is violating security rules, but anyway, you can do it.&lt;/p&gt;
&lt;p&gt;Modify ~/.ssh/config like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host raspberrypi
        HostName localhost
        UserKnownHostsFile=/dev/null
        StrictHostKeyChecking=no
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When experimenting with vms and if you are destroying and re-build vms frequently, you might see this warning messages a lot, so …&lt;/p&gt;</summary><content type="html">&lt;p&gt;First of all, this is violating security rules, but anyway, you can do it.&lt;/p&gt;
&lt;p&gt;Modify ~/.ssh/config like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host raspberrypi
        HostName localhost
        UserKnownHostsFile=/dev/null
        StrictHostKeyChecking=no
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When experimenting with vms and if you are destroying and re-build vms frequently, you might see this warning messages a lot, so, it might be helpful someday.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://linuxcommando.blogspot.com/2008/10/how-to-disable-ssh-host-key-checking.html"&gt;I found it here&lt;/a&gt;&lt;/p&gt;</content><category term="linux"></category></entry><entry><title>How to backup and restore proxmox vms</title><link href="/how-to-backup-and-restore-proxmox-vms.html" rel="alternate"></link><published>2021-09-27T16:36:07+08:00</published><updated>2021-09-27T16:36:07+08:00</updated><author><name>jlz</name></author><id>tag:None,2021-09-27:/how-to-backup-and-restore-proxmox-vms.html</id><summary type="html">&lt;p&gt;I am running proxmox on my own homelab server, so I don't care that much about downtime, I can use stop mode to backup my vms without any problem. So, to backup and restore vm on another machine, just follow these steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;stop vm&lt;/li&gt;
&lt;li&gt;vzdump $vmid [--dumpdir /mnt/backup]  # default …&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;I am running proxmox on my own homelab server, so I don't care that much about downtime, I can use stop mode to backup my vms without any problem. So, to backup and restore vm on another machine, just follow these steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;stop vm&lt;/li&gt;
&lt;li&gt;vzdump $vmid [--dumpdir /mnt/backup]  # default dumpdir is /var/lib/vz/dump&lt;/li&gt;
&lt;li&gt;qmrestore $path-to-dumped-vm $new-vmid&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I transfered an OpenWrt vm to another proxmox node using these steps, works perfectly. I will write another blog about how to use OpenWrt and bridge network to set up private network in proxmox. And a big trap in Ubuntu cloud images.&lt;/p&gt;
&lt;p&gt;For more about backup and restore proxmox vms, refer to &lt;a href="https://pve.proxmox.com/wiki/Backup_and_Restore"&gt;official docs&lt;/a&gt;&lt;/p&gt;</content><category term="proxmox"></category></entry><entry><title>Ubuntu 20.04 Bluetooth headphone problems</title><link href="/ubuntu-2004-bluetooth-headphone-problems.html" rel="alternate"></link><published>2020-10-23T18:37:01+08:00</published><updated>2020-10-23T18:37:01+08:00</updated><author><name>jlz</name></author><id>tag:None,2020-10-23:/ubuntu-2004-bluetooth-headphone-problems.html</id><summary type="html">&lt;p&gt;From my experience, the wireless Bluetooth driver in Ubuntu is not written very well. I have met some severe problems with it. &lt;/p&gt;
&lt;p&gt;For example, one time I noticed one very strange problem: youtube videos do not play in Chrome, but you can drag the progress bar to anywhere, the image …&lt;/p&gt;</summary><content type="html">&lt;p&gt;From my experience, the wireless Bluetooth driver in Ubuntu is not written very well. I have met some severe problems with it. &lt;/p&gt;
&lt;p&gt;For example, one time I noticed one very strange problem: youtube videos do not play in Chrome, but you can drag the progress bar to anywhere, the image shows correctly but it just does not play! My first thought was that maybe the codec is corrupted, so I updated Chrome, but the problem remained. Then I think maybe it's a bug of Chrome, so I tested MPV to play local videos, weird, same problem. I suspect that my system is corrupted but I don't want to reinstall or upgrade. After searching on the web and thinking about the problem, I finally found out that it is the headphone, or I should say, the Bluetooth driver in Linux. The gnome-settings says it is connected to my headphone, but the connection has already become stale, no data can be transferred to the headphone. So every time application tries to send data via Bluetooth, it does not respond.&lt;/p&gt;
&lt;p&gt;I have met another even more severe problem. One time when I was writing my personal statement, the fan of the computer spins really fast, which is weird because I am just writing a document, the load on the CPU should be low. But when I opened htop, I saw all 8 cores of CPU is running at 100 percent, and the criminal is the "bluetoothd", which should be Bluetooth service. Before I figured out what was happening, the whole system stopped responding, I had to use the REISUB trick to reboot the system.&lt;/p&gt;
&lt;p&gt;I am here to provide a simple solution for all these headaches, which I hope it would help someone who reads this.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;&lt;span class="normal"&gt;1&lt;/span&gt;
&lt;span class="normal"&gt;2&lt;/span&gt;
&lt;span class="normal"&gt;3&lt;/span&gt;
&lt;span class="normal"&gt;4&lt;/span&gt;
&lt;span class="normal"&gt;5&lt;/span&gt;
&lt;span class="normal"&gt;6&lt;/span&gt;
&lt;span class="normal"&gt;7&lt;/span&gt;
&lt;span class="normal"&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

sudo rmmod btusb
sudo modprobe btusb

sudo rfkill unblock all
sudo systemctl restart bluetooth
sudo bluetoothctl power on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;p&gt;Anytime you met with Bluetooth problems, you can just "restart" the driver, which should fix the problem at your hands.&lt;/p&gt;
&lt;p&gt;And I hope someday the driver will work perfectly and this trick would be useless.&lt;/p&gt;</content><category term="Ubuntu"></category></entry><entry><title>Some of my projects, tools and scripts</title><link href="/some-of-my-projects-tools-and-scripts.html" rel="alternate"></link><published>2020-10-08T00:00:00+08:00</published><updated>2020-10-08T00:00:00+08:00</updated><author><name>jlz</name></author><id>tag:None,2020-10-08:/some-of-my-projects-tools-and-scripts.html</id><summary type="html">&lt;h3&gt;HTTP traffic index engine&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;design and implement an HTTP request hash algorithm to filter similar HTTP request(from penetration testing perspective)&lt;/li&gt;
&lt;li&gt;design and implement a web page structural clustering algorithm to filter similar web page(from penetration testing perspective)&lt;/li&gt;
&lt;li&gt;design and implement a crawler-based on these two algorithms to index …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h3&gt;HTTP traffic index engine&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;design and implement an HTTP request hash algorithm to filter similar HTTP request(from penetration testing perspective)&lt;/li&gt;
&lt;li&gt;design and implement a web page structural clustering algorithm to filter similar web page(from penetration testing perspective)&lt;/li&gt;
&lt;li&gt;design and implement a crawler-based on these two algorithms to index HTTP traffic&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;web attack detection using Machine Learning&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;collect web attack payloads, including SQL injection payloads, XSS payloads, command injection payloads, XXE payloads, some other RCE payloads like s2-045, and normal HTTP traffic&lt;/li&gt;
&lt;li&gt;test multiple different Machine Learning classification algorithms' false-positive rate and false-negative rate, implemented the most efficient and acceptable model&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;high-frequency futures trading bot&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;implement order imbalance algorithm&lt;/li&gt;
&lt;li&gt;test on multiple futures instruments, some work, some not&lt;/li&gt;
&lt;li&gt;working on implementing high market access&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;leetcode problem Python solutions&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;many leetcode problems' Python solutions&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;LD_PRELOAD based user-space educational Linux rootkit&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;can hide file, process, user&lt;/li&gt;
&lt;li&gt;supports both 32-bit and 64-bit system calls&lt;/li&gt;
&lt;li&gt;works on all distributions&lt;/li&gt;
&lt;li&gt;works on all kernel versions(since it is user-space, no need to worry about kernel versions)&lt;/li&gt;
&lt;li&gt;cons: does not work for statically linked binaries&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;captcha solver using Deep Learning(based on LSTM and CTC loss)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;tried years to do this using traditional computer vision algorithms, well, results were not good&lt;/li&gt;
&lt;li&gt;after deep learning evolved to a more mature stage and CTC loss was introduced, solved it in no time&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Python source code obfuscation tool&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;parse abstract syntax tree(it is very easy to do this in Python)&lt;/li&gt;
&lt;li&gt;manipulate tree node, like, split a meaningful string to multiple meaningless numbers, add no-op code, etc&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;multiple POCs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;multiple struts2 RCE pocs&lt;/li&gt;
&lt;li&gt;solr RCE poc&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;fast and secure file transfer tool in a high packet loss environment&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;password protected upload point&lt;/li&gt;
&lt;li&gt;segment file into chunks&lt;/li&gt;
&lt;li&gt;multi-thread transfer&lt;/li&gt;
&lt;li&gt;packet timeout and re-transfer&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;gnome desktop environment init tool&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;convenient and flexible&lt;/li&gt;
&lt;li&gt;run commands in gnome-terminal&lt;/li&gt;
&lt;li&gt;Chrome, telegram, nautilus, atom, calibre, bitwarden&lt;/li&gt;
&lt;li&gt;some GUI automation helpers&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;quantitative trading utils&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;time and time range utils&lt;/li&gt;
&lt;li&gt;plot volume and price&lt;/li&gt;
&lt;li&gt;load,clean,transform tick data&lt;/li&gt;
&lt;li&gt;sample history data&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Python script "compile" tool&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;"compile" a script to a one-file binary using pyinstaller&lt;/li&gt;
&lt;li&gt;clean up intermediate files&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;youtube music library no-copyright-music downloader&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;parse youtube music library web page and API request&lt;/li&gt;
&lt;li&gt;extract no-copyright-music URLs&lt;/li&gt;
&lt;li&gt;download and save to files&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;others&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;tmux session init tool&lt;/li&gt;
&lt;li&gt;cloudflare nodes latency test and record tool&lt;/li&gt;
&lt;li&gt;videos to music converting tool&lt;/li&gt;
&lt;li&gt;PE(portable executable) analysis tool&lt;/li&gt;
&lt;li&gt;v2ray config generation tool&lt;/li&gt;
&lt;li&gt;Internet speed test and record tool&lt;/li&gt;
&lt;li&gt;backup automation tool&lt;/li&gt;
&lt;li&gt;time series data animation tool&lt;/li&gt;
&lt;li&gt;markdown to pdf automation tool&lt;/li&gt;
&lt;li&gt;GPA calculation tool&lt;/li&gt;
&lt;li&gt;video process automation tool&lt;/li&gt;
&lt;/ul&gt;</content><category term="CV"></category></entry><entry><title>sshfs Transport endpoint is not connected</title><link href="/sshfs-transport-endpoint-is-not-connected.html" rel="alternate"></link><published>2020-04-25T12:26:54+08:00</published><updated>2020-04-25T12:26:54+08:00</updated><author><name>jlz</name></author><id>tag:None,2020-04-25:/sshfs-transport-endpoint-is-not-connected.html</id><summary type="html">&lt;p&gt;I have a notebook running Ubuntu 18.04 and a raspberry pi(4B with 4GB ram, which is a fantastic version of raspberry pi), both are on 7x24. Because capacity of the harddisk in the notebook is not large(only 64GB), I use sshfs to mount one hard disk(1TB …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have a notebook running Ubuntu 18.04 and a raspberry pi(4B with 4GB ram, which is a fantastic version of raspberry pi), both are on 7x24. Because capacity of the harddisk in the notebook is not large(only 64GB), I use sshfs to mount one hard disk(1TB) attached to the raspberry pi.&lt;/p&gt;
&lt;p&gt;The sshfs command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sshfs&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;reconnect&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ServerAliveInterval&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ServerAliveCountMax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;allow_other&lt;/span&gt; &lt;span class="n"&gt;rasp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasp_files&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sshfs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But sshfs seems not very reliable, it crashes every several weeks, I do not know why and I do not want to know why. I just want it to recover. But every time it crashes, trying to relaunch sshfs gives error message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fuse&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;bad&lt;/span&gt; &lt;span class="n"&gt;mount&lt;/span&gt; &lt;span class="n"&gt;point&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;my mount point here&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Transport&lt;/span&gt; &lt;span class="n"&gt;endpoint&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;connected&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trying to umount the directory with command &lt;code&gt;fusermount -u "mount point here"&lt;/code&gt; directly gives following error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fusermount&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;failed&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;unmount&lt;/span&gt; &lt;span class="sr"&gt;/root/&lt;/span&gt;&lt;span class="n"&gt;rasp_files&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Device&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;resource&lt;/span&gt; &lt;span class="n"&gt;busy&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trying to umount using umount gives following error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;umount: /root/rasp_files: target is busy.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you are like me and do not want to know why, this is the solution:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;umount&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mount point here&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;sshfs&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="n"&gt;reconnect&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ServerAliveInterval&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ServerAliveCountMax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;allow_other&lt;/span&gt; &lt;span class="n"&gt;rasp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasp_files&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sshfs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you are curious, read man page of umount and research about linux file system, I am not very familiar with that topic. &lt;/p&gt;</content><category term="Ubuntu"></category></entry><entry><title>Why use return only to construct event from financial time series is a bad idea</title><link href="/why-use-return-only-to-construct-event-from-financial-time-series-is-a-bad-idea.html" rel="alternate"></link><published>2020-04-24T18:24:47+08:00</published><updated>2020-04-24T18:24:47+08:00</updated><author><name>jlz</name></author><id>tag:None,2020-04-24:/why-use-return-only-to-construct-event-from-financial-time-series-is-a-bad-idea.html</id><summary type="html">&lt;p&gt;It is a bad idea to construct events from financial time series by return. The following is an example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;# &lt;span class="nv"&gt;au&lt;/span&gt;

&lt;span class="nv"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;
&lt;span class="nv"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;tmpdf&lt;/span&gt;.&lt;span class="nv"&gt;close&lt;/span&gt;.&lt;span class="nv"&gt;shift&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nv"&gt;tmpdf&lt;/span&gt;.&lt;span class="nv"&gt;close&lt;/span&gt;
&lt;span class="nv"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;delta&lt;/span&gt;[&lt;span class="nv"&gt;market_open_and_close_time_range&lt;/span&gt;.&lt;span class="nv"&gt;not_include_these&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;delta&lt;/span&gt;.&lt;span class="nv"&gt;index&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;]
&lt;span class="nv"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;delta&lt;/span&gt;[&lt;span class="nv"&gt;np&lt;/span&gt;.&lt;span class="nv"&gt;abs&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;delta&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;]
&lt;span class="nv"&gt;ts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;pd&lt;/span&gt;.&lt;span class="nv"&gt;Series&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;list&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;delta&lt;/span&gt;.&lt;span class="nv"&gt;index&lt;/span&gt;&lt;span class="ss"&gt;))&lt;/span&gt;
&lt;span class="nv"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;group_ts_by_gap …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;It is a bad idea to construct events from financial time series by return. The following is an example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;# &lt;span class="nv"&gt;au&lt;/span&gt;

&lt;span class="nv"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;
&lt;span class="nv"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;tmpdf&lt;/span&gt;.&lt;span class="nv"&gt;close&lt;/span&gt;.&lt;span class="nv"&gt;shift&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nv"&gt;tmpdf&lt;/span&gt;.&lt;span class="nv"&gt;close&lt;/span&gt;
&lt;span class="nv"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;delta&lt;/span&gt;[&lt;span class="nv"&gt;market_open_and_close_time_range&lt;/span&gt;.&lt;span class="nv"&gt;not_include_these&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;delta&lt;/span&gt;.&lt;span class="nv"&gt;index&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;]
&lt;span class="nv"&gt;delta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;delta&lt;/span&gt;[&lt;span class="nv"&gt;np&lt;/span&gt;.&lt;span class="nv"&gt;abs&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;delta&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;]
&lt;span class="nv"&gt;ts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;pd&lt;/span&gt;.&lt;span class="nv"&gt;Series&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;list&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;delta&lt;/span&gt;.&lt;span class="nv"&gt;index&lt;/span&gt;&lt;span class="ss"&gt;))&lt;/span&gt;
&lt;span class="nv"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;group_ts_by_gap&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;ts&lt;/span&gt;, &lt;span class="nv"&gt;pd&lt;/span&gt;.&lt;span class="nv"&gt;to_timedelta&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s"&gt;10 seconds&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="ss"&gt;))&lt;/span&gt;
&lt;span class="nv"&gt;x&lt;/span&gt;.&lt;span class="nv"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;delta&lt;/span&gt;.&lt;span class="nv"&gt;index&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;i&lt;/span&gt;,&lt;span class="nv"&gt;g&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;delta&lt;/span&gt;.&lt;span class="nv"&gt;groupby&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;x&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;:
    &lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
    &lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;g&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;

&lt;span class="nv"&gt;_df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;get_df_near_timestamp&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;tmpdf&lt;/span&gt;, &lt;span class="nv"&gt;pd&lt;/span&gt;.&lt;span class="nv"&gt;to_datetime&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="s"&gt;2020-03-09 10:57:17&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="ss"&gt;))&lt;/span&gt;
&lt;span class="nv"&gt;price_volume_plot&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;_df&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;html_df&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;_df&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sometimes, it is just ONE order that drive up or down price, it is impossible to predict such events(at least by my current knowledge). So constructing such events makes no sense since no model could predict these events.&lt;/p&gt;
&lt;p&gt;It may be better to construct events from trending scan results. Filter out those trend with long enough time(like more than 30 seconds), and construct events at the beginning period.&lt;/p&gt;
&lt;p&gt;Hope I can build a model successfully someday. I don't have much time to waste now.&lt;/p&gt;</content><category term="financial"></category></entry><entry><title>A minor Ubuntu 18.04 bluetooth problem</title><link href="/a-minor-ubuntu-1804-bluetooth-problem.html" rel="alternate"></link><published>2020-04-16T13:46:36+08:00</published><updated>2020-04-16T13:46:36+08:00</updated><author><name>jlz</name></author><id>tag:None,2020-04-16:/a-minor-ubuntu-1804-bluetooth-problem.html</id><summary type="html">&lt;p&gt;Several days ago, my 2.4G mouse is broken because the usb receiver can not work properly, so I bought another bluetooth/2.4G mouse on taobao, which costs me only 30 yuan(5 dollars).But there is a small problem with the bluetooth connection.Sometimes the connection just dies …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Several days ago, my 2.4G mouse is broken because the usb receiver can not work properly, so I bought another bluetooth/2.4G mouse on taobao, which costs me only 30 yuan(5 dollars).But there is a small problem with the bluetooth connection.Sometimes the connection just dies and I can not reconnect it. I googled a lot and tried several ways, including&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;service bluetooth restart
systemctl restart bluetooth
rfkill block bluetooth
rfkill unblock bluetooth
bluetoothctl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But none of the above worked.&lt;/p&gt;
&lt;p&gt;Finally, I found &lt;a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1799064"&gt;this page&lt;/a&gt; and edited one line of my grub file from&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;GRUB_CMDLINE_LINUX_DEFAULT=&amp;quot;quiet splash&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;to&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;GRUB_CMDLINE_LINUX_DEFAULT=&amp;quot;quiet splash btusb.enable_autosuspend=0&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;then execute&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;update-grub &amp;amp;&amp;amp; reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Untill Now the mouse works fine.I hope this is "the solution".If anything goes wrong, I might update this info.&lt;/p&gt;
&lt;p&gt;Hope this information can help someone.&lt;/p&gt;</content><category term="Ubuntu"></category></entry><entry><title>Blog on Github with pelican</title><link href="/blog-on-github-with-pelican.html" rel="alternate"></link><published>2020-04-11T21:17:54+08:00</published><updated>2020-04-11T21:17:54+08:00</updated><author><name>jlz</name></author><id>tag:None,2020-04-11:/blog-on-github-with-pelican.html</id><summary type="html">&lt;p&gt;It has been a long time since i wrote blogs. I think it is time to write some thoughts down and practice my English.&lt;/p&gt;
&lt;p&gt;It's very easy to blog on Github with pelican.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;create a repository on github like this: cainiaocome.github.io, replace cainiaocome with your username&lt;/li&gt;
&lt;li&gt;pip install …&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;It has been a long time since i wrote blogs. I think it is time to write some thoughts down and practice my English.&lt;/p&gt;
&lt;p&gt;It's very easy to blog on Github with pelican.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;create a repository on github like this: cainiaocome.github.io, replace cainiaocome with your username&lt;/li&gt;
&lt;li&gt;pip install pelican[Markdown] on your computer&lt;/li&gt;
&lt;li&gt;git clone your repository&lt;/li&gt;
&lt;li&gt;get into that directory&lt;/li&gt;
&lt;li&gt;execute command "pelican-quickstart"&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now you can write your first article now. Create a file named test.md inside directory "content" and put these lines in it&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Title&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;My&lt;/span&gt; &lt;span class="n"&gt;First&lt;/span&gt; &lt;span class="n"&gt;Review&lt;/span&gt;
&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2010&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;03&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;
&lt;span class="n"&gt;Category&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Review&lt;/span&gt;

&lt;span class="n"&gt;Following&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;review&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;my&lt;/span&gt; &lt;span class="n"&gt;favorite&lt;/span&gt; &lt;span class="n"&gt;mechanical&lt;/span&gt; &lt;span class="n"&gt;keyboard&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;now go to the repo root directory and execute: make html &amp;amp;&amp;amp; make github.&lt;/p&gt;
&lt;p&gt;That's it. Your blog is now on. check https://yourusername.github.io/ now.&lt;/p&gt;</content><category term="pelican"></category></entry></feed>